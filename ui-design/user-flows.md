# E-Torch 사용자 흐름(User Flows) 가이드

## 목차

- [1. 개요](#1-개요)
- [2. 사용자 페르소나](#2-사용자-페르소나)
- [3. 핵심 사용자 흐름](#3-핵심-사용자-흐름)
  - [3.1 온보딩 및 로그인 흐름](#31-온보딩-및-로그인-흐름)
  - [3.2 대시보드 관리 흐름](#32-대시보드-관리-흐름)
  - [3.3 위젯 생성 및 편집 흐름](#33-위젯-생성-및-편집-흐름)
  - [3.4 데이터 소스 조회 및 분석 흐름](#34-데이터-소스-조회-및-분석-흐름)
  - [3.5 대시보드 공유 및 탐색 흐름](#35-대시보드-공유-및-탐색-흐름)
  - [3.6 구독 및 결제 관리 흐름](#36-구독-및-결제-관리-흐름)
  - [3.7 모바일 사용자 경험 흐름](#37-모바일-사용자-경험-흐름)
  - [3.8 데이터 내보내기 및 공유 흐름](#38-데이터-내보내기-및-공유-흐름)
- [4. 상태 전이 및 인터랙션 패턴](#4-상태-전이-및-인터랙션-패턴)
- [5. 오류 처리 및 예외 상황](#5-오류-처리-및-예외-상황)
- [6. 접근성 고려사항](#6-접근성-고려사항)

## 1. 개요

E-Torch는 한국의 경제지표(KOSIS, ECOS)를 통합 시각화하는 대시보드 서비스입니다. 본 문서는 사용자가 서비스를 통해 경제지표를 분석하고 활용하는 전체 흐름을 정의합니다.

### 1.1 서비스 핵심 목적

- **데이터 통합 자동화**: KOSIS, ECOS API를 개발자 친화적 형태로 제공
- **중장기 투자 분석 도구**: 거시경제 관점의 경제지표 시각화 및 인사이트 도출
- **수작업 자동화**: 데이터 수집→정리→시각화 과정의 완전 자동화
- **글로벌 접근성**: 한국어/영어 동시 지원으로 해외 투자자에게 한국 경제지표 제공

### 1.2 핵심 데이터 특성

- **다중 데이터 소스**: KOSIS(12개 지표), ECOS(28개 지표) 통합
- **구독 모델**: Basic(20개 지표), Pro(40개 지표)로 접근 권한 차별화
- **7가지 위젯 타입**: TimeSeries, BarChart, ScatterChart, RadarChart, RadialBarChart, TextCustom, TextData
- **성능 최적화**: 1000+ 데이터 포인트에 대한 LTTB 다운샘플링

## 2. 사용자 페르소나

### 2.1 페르소나 분류

```mermaid
graph TB
    A[E-Torch 사용자] --> B[전문 투자자 및 경제 전문가<br/>1차 타겟]
    A --> C[일반 투자자 및 경제 관심층<br/>2차 타겟]
    
    B --> B1[특징]
    B1 --> B11[경제 데이터 분석 능력 우수]
    B1 --> B12[엑셀 등 도구 사용 익숙]
    B1 --> B13[세부 차트 편집 기능 필요]
    
    B --> B2[니즈]
    B2 --> B21[다양한 데이터 통합 분석]
    B2 --> B22[트렌드라인/기준선 활용]
    B2 --> B23[강의자료/분석자료 생성]
    
    C --> C1[특징]
    C1 --> C11[직관적 UI 선호]
    C1 --> C12[경제 데이터 전문성 부족]
    C1 --> C13[UI 편의성 중시]
    
    C --> C2[니즈]
    C2 --> C21[간편한 대시보드 설정]
    C2 --> C22[전문가 인사이트 참조]
    C2 --> C23[기본적 경제지표 이해]
```

### 2.2 페르소나별 주요 여정

#### 전문 투자자 여정

1. **효율성 인식** → 기존 수작업(PDF 파싱, 엑셀 정리)의 비효율성 체감
2. **서비스 발견** → 지인 추천 또는 타겟 마케팅을 통한 노출
3. **기능 검증** → 핵심 기능(데이터 자동화, 차트 커스터마이징) 확인
4. **가치 체험** → 첫 대시보드 생성 및 시간 절약 효과 체감 (Wow Moment)
5. **업무 통합** → 일상 업무 루틴에 서비스 통합
6. **네트워크 확산** → 동종 업계 동료에게 서비스 추천

#### 일반 투자자 여정

1. **우연한 발견** → 전문가가 공유한 대시보드 링크 접근
2. **호기심 발생** → "이 차트는 어디서 만든 것인가?" 궁금증
3. **서비스 탐색** → 더 많은 콘텐츠 확인을 위한 회원가입
4. **점진적 활용** → 템플릿 활용한 개인 대시보드 간단 제작
5. **루틴 정착** → 정기적인 대시보드 확인이 투자 루틴으로 정착

## 3. 핵심 사용자 흐름

### 3.1 온보딩 및 로그인 흐름

```mermaid
flowchart TD
    A[랜딩 페이지 방문] --> B{사용자 선택}
    B -->|로그인/시작하기| C[로그인 페이지]
    B -->|둘러보기| N[공개 대시보드 탐색]
    
    C --> D{SNS 로그인 선택}
    D -->|Google| E[Google OAuth]
    D -->|Naver| F[Naver OAuth]
    D -->|Kakao| G[Kakao OAuth]
    
    E --> H[Supabase 인증 처리]
    F --> H
    G --> H
    
    H --> I{신규/기존 사용자}
    I -->|신규| J[온보딩 프로세스]
    I -->|기존| M[메인 대시보드]
    
    J --> K[서비스 소개]
    K --> L[관심 분야 선택]
    L --> O[추천 템플릿 제안]
    O --> P{템플릿 활용}
    P -->|선택| Q[템플릿 기반 대시보드]
    P -->|건너뛰기| R[빈 대시보드]
    Q --> M
    R --> M
    
    N --> S{로그인 필요 액션}
    S -->|필요시| C
    S -->|계속 둘러보기| N
```

### 3.2 대시보드 관리 흐름

```mermaid
flowchart TD
    A[메인 대시보드 페이지] --> B{사용자 액션}
    
    B -->|새 대시보드 생성| C{구독 플랜 확인}
    C -->|Basic: 3개 미만| D[대시보드 생성]
    C -->|Basic: 3개 도달| E[업그레이드 안내]
    C -->|Pro: 무제한| D
    
    B -->|기존 대시보드 선택| F[대시보드 상세 보기]
    B -->|대시보드 탐색| G[공개 대시보드 탐색]
    
    D --> H[타이틀/설명 입력]
    H --> I[첫 위젯 추가]
    I --> J[레이아웃 조정]
    J --> K[대시보드 저장]
    K --> L[공개/비공개 설정]
    L --> F
    
    F --> M{대시보드 액션}
    M -->|편집| N[편집 모드]
    M -->|시간범위 변경| O[기간 설정]
    M -->|새로고침| P[데이터 갱신]
    M -->|공유| Q[공유 옵션]
    M -->|내보내기| R[내보내기 옵션]
    
    N --> S[위젯 추가/편집]
    S --> T[드래그 앤 드롭 레이아웃]
    T --> U[변경사항 저장]
    U --> F
    
    O -->|Basic: 최근 3년| V[제한된 기간 선택]
    O -->|Pro: 전체 기간| W[전체 기간 선택]
    V --> F
    W --> F
```

### 3.3 위젯 생성 및 편집 흐름

```mermaid
flowchart TD
    A[위젯 에디터 진입] --> B{위젯 유형 선택}
    
    B -->|차트형 위젯| C[TimeSeries/BarChart/ScatterChart/RadarChart/RadialBarChart]
    B -->|텍스트형 위젯| D[TextCustom/TextData]
    
    C --> E[데이터 소스 설정]
    D -->|TextCustom| F[사용자 정의 텍스트]
    D -->|TextData| E
    
    E --> G{데이터 소스 선택}
    G -->|KOSIS| H1[KOSIS 지표 검색]
    G -->|ECOS| H2[ECOS 지표 검색]
    
    H1 --> I[구독 플랜별 지표 필터링]
    H2 --> I
    I -->|Basic: 20개| J1[제한된 지표 접근]
    I -->|Pro: 40개| J2[전체 지표 접근]
    
    J1 --> K[지표 선택]
    J2 --> K
    K --> L[시간 범위/주기 설정]
    L --> M{데이터 변환}
    M -->|원본값| N1[원본 데이터]
    M -->|변화율| N2[YoY/MoM/QoQ 계산]
    M -->|누적값| N3[누적 계산]
    M -->|이동평균| N4[이동평균 계산]
    
    N1 --> O[차트 미리보기]
    N2 --> O
    N3 --> O
    N4 --> O
    F --> P[텍스트 미리보기]
    
    O --> Q{옵션 편집}
    Q -->|Panel 옵션| R1[제목/설명/배경]
    Q -->|Chart 옵션| R2[축/범례/툴팁/스타일]
    Q -->|위젯별 전용| R3[유형별 특화 옵션]
    
    P --> S{텍스트 옵션}
    S -->|Text 옵션| T1[폰트/정렬/색상]
    S -->|Format 옵션| T2[숫자 포맷/조건부 서식]
    
    R1 --> U[변경사항 적용]
    R2 --> U
    R3 --> U
    T1 --> U
    T2 --> U
    
    U --> V[위젯 저장]
    V --> W[대시보드에 추가]
```

### 3.4 데이터 소스 조회 및 분석 흐름

```mermaid
flowchart TD
    A[데이터 조회 시작] --> B{데이터 소스 선택}
    B -->|KOSIS| C1[통계청 지표<br/>M/Q/A 주기]
    B -->|ECOS| C2[한국은행 지표<br/>D/M/Q/A 주기]
    
    C1 --> D[구독 플랜 권한 확인]
    C2 --> D
    D -->|Basic| E1[20개 지표 접근]
    D -->|Pro| E2[40개 지표 접근]
    
    E1 --> F[지표 검색/선택]
    E2 --> F
    F --> G{검색 방법}
    G -->|텍스트 검색| H1[지표명/코드 검색]
    G -->|카테고리 탐색| H2[트리 구조 탐색]
    G -->|최근 사용| H3[히스토리 기반]
    
    H1 --> I[지표 선택]
    H2 --> I
    H3 --> I
    
    I --> J[시간 범위 설정]
    J -->|Basic| K1[최근 3년 제한]
    J -->|Pro| K2[전체 기간 선택]
    
    K1 --> L[주기 선택]
    K2 --> L
    L --> M[데이터 미리보기]
    
    M --> N{데이터 변환}
    N -->|원본값| O1[API 응답 그대로]
    N -->|변화율| O2[전기/전년 대비 계산]
    N -->|누적값| O3[기간별 누적]
    N -->|이동평균| O4[5일/20일/60일 평균]
    
    O1 --> P[변환된 데이터 표시]
    O2 --> P
    O3 --> P
    O4 --> P
    
    P --> Q{데이터 활용}
    Q -->|차트 생성| R1[위젯 에디터로 전달]
    Q -->|추가 시리즈| R2[다중 시리즈 구성]
    Q -->|데이터 내보내기| R3[CSV/Excel 다운로드]
```

### 3.5 대시보드 공유 및 탐색 흐름

```mermaid
flowchart TD
    A[대시보드 상세 페이지] --> B{공유 액션}
    B -->|공유하기| C[공유 옵션 모달]
    
    C --> D{공개 상태 확인}
    D -->|비공개| E[공개 설정 안내]
    D -->|공개| F[공유 옵션 표시]
    
    E -->|공개 설정| F
    F --> G{공유 방법}
    G -->|링크 공유| H[URL 복사]
    G -->|소셜 공유| I[SNS 공유 버튼]
    G -->|임베드 코드| J{Pro 플랜 확인}
    
    J -->|Pro| K[임베드 코드 생성]
    J -->|Basic| L[업그레이드 안내]
    
    M[대시보드 탐색 페이지] --> N{탐색 방법}
    N -->|검색| O[키워드 검색]
    N -->|카테고리| P[분야별 필터]
    N -->|인기순| Q[조회수/복사수 정렬]
    N -->|최신순| R[생성일 정렬]
    
    O --> S[대시보드 목록]
    P --> S
    Q --> S
    R --> S
    
    S --> T[대시보드 카드]
    T --> U{카드 액션}
    U -->|미리보기| V[대시보드 상세]
    U -->|관심 등록| W[즐겨찾기 추가]
    U -->|복사| X{Pro 플랜 확인}
    
    X -->|Pro| Y[내 계정으로 복사]
    X -->|Basic| Z[업그레이드 안내]
    
    V --> AA{추가 액션}
    AA -->|복사| X
    AA -->|관심 등록| W
    AA -->|제작자 팔로우| BB[제작자 구독]
```

### 3.6 구독 및 결제 관리 흐름

```mermaid
flowchart TD
    A[구독 관리 페이지] --> B{현재 구독 상태}
    B -->|Basic 플랜| C[무료 플랜 정보]
    B -->|Pro 플랜| D[유료 플랜 정보]
    
    C --> E[플랜 비교 테이블]
    E --> F{업그레이드 선택}
    F -->|Pro 월간| G1[월간 9,900원]
    F -->|Pro 연간| G2[연간 99,000원<br/>17% 할인]
    F -->|7일 무료 체험| G3[Pro 체험]
    
    G1 --> H[토스페이먼츠 결제]
    G2 --> H
    G3 --> I[체험 시작]
    
    H --> J{결제 방법}
    J -->|카드결제| K1[신용카드/체크카드]
    J -->|계좌이체| K2[실시간 계좌이체]
    J -->|간편결제| K3[카카오페이/네이버페이/토스페이]
    
    K1 --> L[결제 처리]
    K2 --> L
    K3 --> L
    
    L --> M{결제 결과}
    M -->|성공| N[Pro 플랜 활성화]
    M -->|실패| O[결제 오류 안내]
    
    D --> P{구독 관리}
    P -->|플랜 변경| F
    P -->|구독 취소| Q[취소 확인 다이얼로그]
    P -->|결제 내역| R[PaymentHistory]
    P -->|결제 수단 변경| S[결제 방법 관리]
    
    Q -->|취소 확인| T[구독 취소 처리]
    T --> U[Basic 플랜 전환]
    
    I --> V[7일 체험 기간]
    V --> W{체험 종료}
    W -->|유료 전환| H
    W -->|체험 종료| U
```

### 3.7 모바일 사용자 경험 흐름

```mermaid
flowchart TD
    A[모바일 접속] --> B[반응형 레이아웃 적용]
    B --> C{화면 크기별 최적화}
    C -->|~767px| D[모바일 레이아웃]
    C -->|768-1199px| E[태블릿 레이아웃]
    
    D --> F[압축된 헤더<br/>64px 높이]
    F --> G[햄버거 메뉴]
    G --> H[대시보드 세로 스크롤]
    
    E --> I[중간 헤더<br/>72px 높이]
    I --> J[접이식 사이드바]
    J --> K[2열 그리드 레이아웃]
    
    H --> L[대시보드 선택]
    K --> L
    
    L --> M[모바일 최적화 대시보드]
    M --> N{터치 인터랙션}
    N -->|핀치 줌| O[위젯 확대/축소]
    N -->|탭| P[위젯 전체화면]
    N -->|스와이프| Q[페이지 네비게이션]
    N -->|롱프레스| R[컨텍스트 메뉴]
    
    P --> S[전체화면 위젯 뷰]
    S --> T{위젯 액션}
    T -->|데이터 테이블| U[접근성 테이블]
    T -->|공유| V[모바일 공유 시트]
    T -->|닫기| M
    
    M --> W{편집 제한}
    W -->|드래그| X[위젯 이동 지원]
    W -->|리사이즈| Y[속성 패널에서만]
    W -->|추가/삭제| Z[풀스크린 모달]
```

### 3.8 데이터 내보내기 및 공유 흐름

```mermaid
flowchart TD
    A[대시보드/위젯 화면] --> B[내보내기 버튼]
    B --> C{구독 플랜 확인}
    
    C -->|Basic| D[Basic 내보내기 옵션]
    C -->|Pro| E[Pro 내보내기 옵션]
    
    D --> F{Basic 형식}
    F -->|PNG| G1[워터마크 포함 이미지]
    F -->|PDF| G2[워터마크 포함 PDF]
    F -->|CSV| G3[원본 데이터]
    
    E --> H{Pro 형식}
    H -->|PNG| I1[고해상도 이미지]
    H -->|PDF| I2[고품질 PDF]
    H -->|SVG| I3[벡터 이미지]
    H -->|CSV| I4[원본 데이터]
    H -->|Excel| I5[Excel 형식]
    
    G1 --> J[Basic 다운로드]
    G2 --> J
    G3 --> J
    
    I1 --> K[Pro 다운로드]
    I2 --> K
    I3 --> K
    I4 --> K
    I5 --> K
    
    J --> L{후속 액션}
    K --> L
    
    L -->|로컬 저장| M[디바이스 저장]
    L -->|즉시 공유| N[공유 시트]
    
    N --> O{공유 방법}
    O -->|이메일| P1[이메일 첨부]
    O -->|메신저| P2[카카오톡/슬랙]
    O -->|클라우드| P3[구글드라이브/드롭박스]
    O -->|SNS| P4[페이스북/트위터]
```

## 4. 상태 전이 및 인터랙션 패턴

### 4.1 데이터 로딩 상태

```mermaid
stateDiagram-v2
    [*] --> Idle
    Idle --> Loading: 데이터 요청
    Loading --> LoadingWithSkeleton: 300ms 경과
    LoadingWithSkeleton --> Success: 로드 완료
    Loading --> Success: 빠른 로드
    Loading --> Error: 네트워크 오류
    LoadingWithSkeleton --> Error: 로드 실패
    Error --> Loading: 재시도
    Success --> Idle: 초기화
    Success --> Loading: 새로고침
```

### 4.2 편집 모드 전환

```mermaid
stateDiagram-v2
    [*] --> ViewMode
    ViewMode --> EditMode: 편집 버튼
    EditMode --> ViewMode: 취소
    EditMode --> Validating: 저장
    Validating --> EditMode: 검증 실패
    Validating --> Saving: 검증 성공
    Saving --> ViewMode: 저장 성공
    Saving --> Error: 저장 실패
    Error --> EditMode: 에러 확인
    
    EditMode --> AutoSaving: 변경 감지
    AutoSaving --> EditMode: 임시저장 완료
```

### 4.3 구독 플랜 제한 상태

```mermaid
stateDiagram-v2
    [*] --> CheckPlan
    CheckPlan --> BasicPlan: Basic 사용자
    CheckPlan --> ProPlan: Pro 사용자
    
    BasicPlan --> WithinLimit: 제한 내
    BasicPlan --> LimitReached: 제한 도달
    
    WithinLimit --> Action: 기능 실행
    LimitReached --> UpgradePrompt: 업그레이드 안내
    UpgradePrompt --> Upgrade: 업그레이드
    UpgradePrompt --> BasicPlan: 취소
    
    ProPlan --> Action: 제한 없음
    Upgrade --> ProPlan: 결제 완료
    Action --> CheckPlan: 다음 액션
```

## 5. 오류 처리 및 예외 상황

### 5.1 오류 발생 시나리오

```mermaid
flowchart TD
    A[오류 발생] --> B{오류 유형 분류}
    
    B -->|네트워크 오류| C[연결 실패/서버 다운]
    B -->|인증 오류| D[토큰 만료/권한 부족]
    B -->|데이터 오류| E[잘못된 입력/형식 오류]
    B -->|구독 제한| F[플랜 제한 도달]
    B -->|시스템 오류| G[예상치 못한 오류]
    
    C --> H1[자동 재시도<br/>토스트 알림]
    D --> H2[재인증 유도<br/>로그인 모달]
    E --> H3[입력 검증<br/>인라인 오류 표시]
    F --> H4[업그레이드 안내<br/>제한사항 설명]
    G --> H5[안전한 폴백 UI<br/>에러 리포팅]
    
    H1 --> I{재시도 결과}
    I -->|성공| J[정상 복구]
    I -->|실패| K[지속적 오류 안내]
```

### 5.2 오류 복구 전략

| 오류 유형 | 감지 방법 | 복구 전략 | 사용자 피드백 |
|---------|----------|---------|------------|
| **네트워크 오류** | API 응답 실패 | 자동 재시도 (최대 3회) | 토스트 알림 + 재시도 버튼 |
| **인증 오류** | 401/403 응답 | 재인증 프로세스 유도 | 로그인 모달 + 현재 페이지 복원 |
| **데이터 검증 오류** | 클라이언트 검증 | 실시간 입력 검증 | 필드별 인라인 오류 메시지 |
| **구독 제한 오류** | 플랜 확인 | 업그레이드 안내 | 제한사항 명확한 설명 |
| **시스템 오류** | Error Boundary | 안전한 폴백 UI | 사과 메시지 + 리포트 옵션 |

## 6. 접근성 고려사항

### 6.1 WCAG 2.1 AA 준수 원칙

```mermaid
flowchart TD
    A[접근성 설계 원칙] --> B[인식 가능성]
    A --> C[운용 가능성]
    A --> D[이해 가능성]
    A --> E[견고성]
    
    B --> B1[대체 텍스트<br/>모든 차트/이미지]
    B --> B2[색상 대비<br/>4.5:1 이상]
    B --> B3[텍스트 크기 조절<br/>200%까지 지원]
    
    C --> C1[키보드 접근<br/>모든 기능]
    C --> C2[충분한 시간<br/>자동 새로고침 제어]
    C --> C3[발작 방지<br/>깜빡임 제한]
    
    D --> D1[읽기 쉬운 텍스트<br/>명확한 언어]
    D --> D2[예측 가능한 기능<br/>일관된 내비게이션]
    D --> D3[입력 지원<br/>오류 식별/수정]
    
    E --> E1[호환성<br/>보조 기술 지원]
    E --> E2[유효한 코드<br/>표준 HTML]
```

### 6.2 키보드 내비게이션 패턴

- **Tab/Shift+Tab**: 순차적 포커스 이동
- **Enter/Space**: 버튼 활성화
- **Arrow Keys**: 드롭다운/메뉴 탐색
- **Esc**: 모달/팝업 닫기
- **단축키**: Ctrl+S(저장), Ctrl+Z(실행취소)

### 6.3 스크린 리더 지원

- **의미적 HTML**: header, nav, main, aside 구조
- **ARIA 라벨**: 복잡한 위젯의 상태/역할 명시
- **차트 대체 텍스트**: 데이터 요약 정보 제공
- **실시간 업데이트**: aria-live로 변경사항 알림

### 6.4 시각적 접근성

- **색상 독립성**: 색상 외 구별 요소 병행 (아이콘, 패턴)
- **고대비 모드**: 시스템 설정 자동 반영
- **차트 접근성**: 데이터 테이블 토글 제공
- **터치 최적화**: 44×44px 최소 터치 영역

### 6.5 다국어 접근성

- **언어별 폰트**: 한국어(Inter), 영어(Inter) 최적화
- **RTL/LTR**: 언어별 자동 방향성 설정
- **번역 품질**: 전문 용어 일관성 유지
- **문화적 적응**: 숫자/날짜 형식 현지화

---

이 사용자 흐름 가이드를 통해 E-Torch 서비스의 모든 사용자 시나리오를 일관되고 체계적으로 구현할 수 있습니다. 각 흐름은 사용자의 목표 달성을 위한 최적의 경로를 제시하며, 접근성과 사용성을 동시에 보장합니다.
